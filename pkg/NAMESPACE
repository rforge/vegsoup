#useDynLib(vegsoup)

import(methods)
import(coenoflex)
importFrom("optpart", optpart, partana, tabdev, disdiam)
importFrom("multitable", data.list)
importFrom("graphics", plot, hist)
importFrom("stats", as.dist, quantile)
importFrom("utils", head, tail)
importFrom("vegan", coverscale, vegdist, decostand, distconnected)
importFrom("cluster", ellipsoidhull, agnes, pam, silhouette)
importFrom("sp", rbind.SpatialPoints, rbind.SpatialPointsDataFrame,
rbind.SpatialPolygons, rbind.SpatialPolygonsDataFrame, SpatialPointsDataFrame, SpatialPolygonsDataFrame)

importMethodsFrom(sp, coordinates, "coordinates<-", bbox, spplot, proj4string, "proj4string<-", spTransform)
importClassesFrom(sp, Spatial, SpatialPointsDataFrame, SpatialPolygonsDataFrame, CRS, GridTopology)

importClassesFrom(Matrix, sparseMatrix, dsparseMatrix)
importClassesFrom(raster, Extent, BasicRaster, Raster, RasterLayer, RasterBrick, RasterStack, RasterStackBrick)
importMethodsFrom(raster, extract, ncell)

#importFrom("Hmisc", latex)
#importFrom("googleVis", gvisMap)
#importFrom("isopam", isopam)

#explicit exports
export(
    "Coverscale",
    "species",
    "sites",
    "taxonomy",
    "stackSpecies",
    "stackSites",
    "stackCoordinates",
    "SpeciesTaxonomy",
    "Vegsoup",
    "coenoflex",
    "instantsoup",
    "OptimStride",
    "VegsoupPartition",
    "plotPCO",
    "read.verbatim",
    "read.verbatim.append",
    "write.verbatim",
    "str2latlng",
    "tile2latlng",
    "latlng2tile",
    "whatshere2lnglat",
    "compass",
    "castFooter"
)
exportMethods(
    "[",
    "$",
    "abbr",
    "AprioriGrouping",
    "Accuracy",
    "Association",
    "as.vector",
    "as.matrix",
    "as.character",
    "as.logical",
    "as.numeric",
    "as.dist",
    "average",
    "bind",
    "BraunBlanquetReduce",
#   "coerce",
    "colSums",
    "colMeans",
    "Confus",
    "constancy",
    "contingency",
    "coverscale",
    "coverscale<-",
    "coordinates",
    "decostand",
    "decostand<-",
    "dim",
    "disdiam",
    "elevation",
    "extract",
    "fill",
    "Fidelity",
    "FisherTest",
    "distconnected",
    "getK",
    "getStat",
    "QuickMap",	
    "head",
    "coldiss",
    "indices",
    "Indpower",
    "Indspc",
    "Indval",
    "Isamic",
    "is.continuous",
    "is.ordinal",
    "Latex",
    "Layers",
    "Layers<-",
    "KML",
    "reverseGeocode",
    "murdoch",
    "names",
    "names<-",
    "ncol",
    "ncell",
    "nndist",
    "nrow",
    "Optindval",
    "Optsil",
    "outlier",
    "Partana",
    "Partition",
    "Partitioning",
    "PartitioningMatrix",
    "PartitioningCombinations",
    "Phi",
    "plot",
    "proj4string",
    "proj4string<-",
    "quantile",
    "rbind",
    "richness",
    "rectangles",
    "rownames",
    "row.names",
    "rownames<-",
    "row.names<-",
    "rowSums",
    "rowMeans",
    "SampleVegsoup",
    "seriation",
    "shared",
    "SigFidelity",
    "silhouette",
    "species",
    "Sites",
    "sites",
    "Sites<-",
    "splitAbbr",
    "SpatialPointsVegsoup",
    "SpatialPolygonsVegsoup",
    "Species",
    "Species<-",
    "SpeciesList",	
    "spread",
#   "Stride",
    "summary",
    "Tabdev",
    "tail",
    "taxon",
    "taxonomy",
    "Taxonomy",
    "Taxonomy<-",
    "typical",
    "vegdist",
    "vegdist<-",
    "write.verbatim"
)

exportClasses(
     "Coverscale",
     "Species",
     "Sites",
     "Taxonomy",
     "SpeciesTaxonomy",
     "Vegsoup",
     "VegsoupPartition",
     "VegsoupPartitionFidelity",
     "VegsoupOptimstride"
)

# ensure that dispatch also works inside base functions
S3method(as.matrix, Vegsoup)
S3method(as.array, Vegsoup)
S3method(as.vector, Vegsoup)
S3method(points, Vegsoup)
S3method(as.data.frame, Vegsoup)

#S3method(as.SpatialPoints, Vegsoup)
#S3method(as.SpatialPointsDataFrame, Vegsoup)

#S3method(coverscale, Vegsoup)
#S3method(vegdist, Vegsoup)
#S3method(as.dist, Vegsoup)

#S3method(as.mefa, Vegsoup)
#S3method(as.sparseMatrix, Vegsoup)