#useDynLib(vegsoup)

import(methods)

importFrom("graphics", plot, hist)
importFrom("stats", as.dist, quantile, as.dendrogram)
importFrom("utils", head, tail)

#import(coenoflex)

importFrom("labdsv", indval)

importFrom("optpart", optsil,  optindval, disdiam, tabdev, partana)

importFrom("vegan", coverscale, vegdist, decostand, distconnected)

importFrom("cluster", ellipsoidhull, agnes, pam, silhouette, fanny)

importFrom("spatstat", nndist, owin, runifpoint)

importFrom("vegclust", vegclustdist, defuzzify)

importFrom("sp", rbind.SpatialPoints, rbind.SpatialPointsDataFrame,
                 rbind.SpatialPolygons, rbind.SpatialPolygonsDataFrame,
                 SpatialPointsDataFrame, SpatialPolygonsDataFrame)
importClassesFrom(sp, Spatial, SpatialPointsDataFrame,
                      SpatialPolygonsDataFrame, CRS, GridTopology)
importMethodsFrom(sp, coordinates, "coordinates<-", bbox, spplot,
                      proj4string, "proj4string<-", spTransform,
                      over)

import(rgdal)

importClassesFrom(raster, Extent, BasicRaster, Raster, RasterLayer,
                          RasterBrick, RasterStack, RasterStackBrick)
importMethodsFrom(raster, extract, ncell, extent)

importFrom("multitable", data.list)
importClassesFrom(Matrix, sparseMatrix, dsparseMatrix)

#importFrom("Hmisc", latex)
#importFrom("googleVis", gvisMap)
#importFrom("isopam", isopam)

#explicit exports
export(
    "Coverscale",
    "species",   # also in exportMethods
    "species<-", # also in exportMethods
    "sites",
    "taxonomy",
    "taxonomy<-",
    "stackSpecies",
    "stackSites",
    "stackCoordinates",
    "shapeSpecies",
    "reshapeSpecies",
    "SpeciesTaxonomy",
    "Vegsoup",
#   "coenoflex",
    "instantsoup",
    "plainsoup",
    "OptimStride",
    "VegsoupPartition",
    "plotPCO",
    "read.verbatim",
    "read.verbatim.append",
    "write.verbatim",
    "str2latlng",
    "tile2latlng",
    "latlng2tile",
    "whatshere2lnglat",
    "compass",
    "singletons",
    "castFooter",
    "header",
    "template"
)
exportMethods(
    "[",
    "$",
    "abbr",
    "AprioriGrouping",
    "Accuracy",
    "Association",
    "as.vector",
    "as.matrix",
    "as.character",
    "as.logical",
    "as.numeric",
    "as.dist",
    "as.hclust",
    "as.dendrogram",
    "average",
    "bind",
    "BraunBlanquetReduce",
#   "coerce",
    "colSums",
    "colMeans",
    "compress",
    "Confus",
    "constancy",
    "contingency",
    "coverscale",
    "coverscale<-",
    "coordinates",
    "decostand",
    "decostand<-",
    "dim",
    "disdiam",
    "elevation",
    "extent",
    "extract",
    "fill",
    "hist",
    "Fidelity",
    "FisherTest",
    "distconnected",
    "getK",
    "getStat",
    "hcr",
    "QuickMap",	
    "head",
    "coldiss",
    "indices",
    "Indpower",
    "Indspc",
    "Indval",
    "identical",
    "isamic",
    "is.continuous",
    "is.ordinal",
    "is.occurence",
    "Latex",
    "Layers",
    "Layers<-",
    "Layer",
    "KML",
    "reverseGeocode",
    "methods",
    "murdoch",
    "names",
    "names<-",
    "ncol",
    "ncell",
    "nndist",
    "nrow",
    "optimclass1",
    "optimclass2",
    "optindval",
    "optsil",
    "outlier",
    "over",
    "partana",
    "Partition",
    "Partitioning",
    "PartitioningMatrix",
    "PartitioningCombinations",
    "peaks",
    "Phi",
    "plot",
    "proj4string",
    "proj4string<-",
    "quantile",
    "rbind",
    "relevee",
    "richness",
    "rectangles",
    "rownames",
    "row.names",
    "rownames<-",
    "row.names<-",
    "rowSums",
    "rowMeans",
    "SampleVegsoup",
    "seriation",
    "shared",
    "SigFidelity",
    "silhouette",
    "species",
    "species<-",
    "sites",
    "Sites",
    "Sites<-",
    "splitAbbr",
    "SpatialPointsVegsoup",
    "SpatialPolygonsVegsoup",
    "SpeciesList",	
    "spread",
    "stable",
    "stride",
#   "Stride",
    "summary",
    "subset",
    "tabdev",
    "tail",
    "taxon",
    "taxonomy",
    "Taxonomy",
    "Taxonomy<-",
    "threshold",
    "typical",
    "vegdist",
    "vegdist<-",
    "which.max",
    "write.verbatim"
)

exportClasses(
     "Coverscale",
     "Species",
     "Sites",
     "Taxonomy",
     "SpeciesTaxonomy",
     "Vegsoup",
     "VegsoupPartition",
     "VegsoupPartitionFidelity",
     "VegsoupOptimstride"
)

# ensure that dispatch also works inside base functions
S3method(as.matrix, Vegsoup)
S3method(as.array, Vegsoup)
S3method(as.vector, Vegsoup)
S3method(points, Vegsoup)
S3method(as.data.frame, Vegsoup)


#S3method(as.SpatialPoints, Vegsoup)
#S3method(as.SpatialPointsDataFrame, Vegsoup)

#S3method(coverscale, Vegsoup)
#S3method(vegdist, Vegsoup)
#S3method(as.dist, Vegsoup)

#S3method(as.mefa, Vegsoup)
#S3method(as.sparseMatrix, Vegsoup)